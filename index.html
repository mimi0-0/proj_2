<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スマートドローン操作アプリ</title>
    <link rel="stylesheet" href="main.css">
    
</head>
<body>
    <div class="container">
        <h1>かんたんtello操作♪</h1>
        
        <div class="mode-selector">
            <label>
                <input type="radio" name="mode" value="manual" checked> 手動操作
            </label>
            <label>
                <input type="radio" name="mode" value="voice"> 音声操作
            </label>
            <label>
                <input type="radio" name="mode" value="text"> テキスト操作
            </label>
        </div>
        
        <!-- 手動操作パネル -->
        <div class="control-panel" id="manualControls">
            <div class="directional-controls">
                <button class="control-button" id="upButton">↑Up</button>
                <div class="horizontal-controls">
                    <button class="control-button" id="leftButton">← Left</button>
                    <button class="control-button" id="rightButton">Right →</button>
                </div>
                <button class="control-button" id="downButton">↓Down</button>
            </div>
            <div class="action-controls">
                <button class="control-button" id="takeoffButton">離陸</button>
                <button class="control-button" id="landButton">着陸</button>
                <button class="control-button" id="landButton">フリップ</button>
            </div>
        </div>
        
        <!-- 音声操作パネル -->
        <div class="control-panel" id="voiceControls" style="display: none;">
            <button class="mic-button" id="micButton">🎤</button>
            <p>マイクを押して音声コマンドを入力してください</p>
        </div>

        <!-- テキスト操作パネル -->
        <div class="control-panel" id="textControls" style="display: none;">
            <div class="chat-container" id="chatContainer">
                <!-- 入力したテキストがここに表示されます -->
            </div>
            <input type="text" id="textCommand" placeholder="テキストでコマンドを入力">
            <button class="control-button" id="sendTextButton">送信</button>
        </div>
        <div class="drone-status">
            <!-- ドローン映像とステータスを横並びにするコンテナ -->
            <div class="status-wrapper">
                <!-- カメラ映像 -->
                <div class="image-container">
                    <h2></h2>
                    <img id="droneImage" src="" alt="Drone Camera" />
                </div>
        
                <!-- ドローンステータス -->
                <div class="status-container">
                    <h2></h2>
                    <ul>
                        <li><strong>バッテリー:</strong> <span id="batteryStatus">00%</span></li>
                        <li><strong>飛行時間:</strong> <span id="flightTime">0:00</span></li>
                        <li><strong>ステータス:</strong> <span id="droneStatus">True</span></li>
                    </ul>
                </div>
            </div>
        </div>
        
        
    </div>

    <script>
        // モード切り替えの処理
        const modeSelector = document.querySelectorAll('input[name="mode"]'); // ラジオボタンの取得
        const manualControls = document.getElementById('manualControls');
        const voiceControls = document.getElementById('voiceControls');
        const textControls = document.getElementById('textControls');

        // ラジオボタンの変更に応じて表示モードを切り替え
        modeSelector.forEach(mode => {
            mode.addEventListener('change', () => {
                if (mode.value === 'manual' && mode.checked) {
                    manualControls.style.display = 'block';
                    voiceControls.style.display = 'none';
                    textControls.style.display = 'none';
                } else if (mode.value === 'voice' && mode.checked) {
                    manualControls.style.display = 'none';
                    voiceControls.style.display = 'block';
                    textControls.style.display = 'none';
                } else if (mode.value === 'text' && mode.checked) {
                    manualControls.style.display = 'none';
                    voiceControls.style.display = 'none';
                    textControls.style.display = 'block';
                }
            });
        });

        // 初期状態で「手動操作」を選択しているため、手動操作のパネルを表示
        document.querySelector('input[name="mode"][value="manual"]').checked = true;

        // テキスト送信ボタンの処理
        document.getElementById('sendTextButton').addEventListener('click', () => {
            const textCommand = document.getElementById('textCommand').value;
            if (textCommand.trim()) {
                const chatContainer = document.getElementById('chatContainer');
                const newMessage = document.createElement('div');
                newMessage.classList.add('chat-message');
                newMessage.textContent = textCommand;

                // チャットエリアにメッセージを追加
                chatContainer.appendChild(newMessage);

                // 入力フィールドを空にする
                document.getElementById('textCommand').value = '';
                chatContainer.scrollTop = chatContainer.scrollHeight; // チャットエリアのスクロールを一番下に
            }
        });

        // リアルタイム画像を定期的に更新
        function updateDroneImage() {
            const droneImage = document.getElementById('droneImage');
            const imageUrl = 'https://image1.shopserve.jp/it2-048.cc.shopserve.jp/pic-labo/llimg/test.png?t=20111019175557'; // ここにドローンカメラのURLを設定

            // 画像の更新
            droneImage.src = imageUrl + '?' + new Date().getTime(); // キャッシュを避けるため、タイムスタンプをクエリパラメータとして追加
        }

        // 5秒ごとに画像を更新
        setInterval(updateDroneImage, 5000);
    </script>
</body>
</html>

